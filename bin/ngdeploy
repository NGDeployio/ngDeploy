#!/usr/bin/env node

var program = require('commander')
    , ng = require('../lib/cli')
    , pkg = require('../package.json');

const chalk = require("chalk");

program
    .version(pkg.version)
    .usage('[command]');

program
    .option("-t,--test","Test mode that avoids ajax requests.");

program
    .command('init <appName> <dist>')
    .description("Initialize ngdeploy with <appName> and <distribution folder>")
    .action(function(appName,dist){
        if(program.test){
            ng.name(appName);
            ng.dist(dist);
            ng.create_configuration({"id":"123"});
        }else{
            ng.init(appName,dist);
        }
    });

program
    .command('upload')
    .description('upload the distribution folder into the cloud. Take it away!')
    .action(ng.upload);

program
    .command('clean')
    .description('remove configuration')
    .action(ng.clean);

program.on('--help', function(){
    ng.additional_help()
});

program.parse(process.argv);

if(program.args.length==0)
        ng.usage();
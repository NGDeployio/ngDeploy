#! /usr/bin/env node
'use strict';

var program = require('commander')
    , ng = require('../lib/cli')
    , pkg = require('../package');

const chalk = require("chalk");

program
    .version(pkg.version)
    .usage('[command]');

program
    .option("-t,--test","Test mode that avoids ajax requests.");

program
    .command('init <appName> <dist>')
    .option("-a, --accesskey <key>","Set the access key")
    .description("Initialize ngdeploy with <appName> and <distribution folder>")
    .action(function(appName,dist,opts){
            ng.init(appName,dist,opts);
    });

program
    .command('upload')
    .description('upload the distribution folder into the cloud. Take it away!')
    .action(ng.upload);

program
    .command('set')
    .option("-a, --accesskey <key>","Set the access key")
    .action(function(opts){
        ng.update(opts);
    });


program
    .command('clean')
    .description('remove configuration')
    .action(ng.clean);

program.on('--help', function(){
    ng.additional_help()
});

ng.readngdeploy();
program.parse(process.argv);

if(program.args.length==0)
        ng.usage();